# Android科学计算器项目文档

## 项目简介
这是一个功能完整的Android科学计算器应用，使用纯Java开发，支持基础运算、科学函数计算、历史记录等功能。

## 项目特性
- **基础运算**：加法、减法、乘法、除法
- **科学函数**：三角函数（sin、cos、tan）、对数（ln、log）、平方根、幂运算、阶乘
- **数学常量**：圆周率π、自然常数e
- **历史记录**：自动保存计算历史，支持查看和重用
- **实时预览**：输入过程中实时显示计算结果
- **用户友好**：长按复制结果、清除历史记录等便民功能

## 技术架构

### 开发语言
- **Java**：100%纯Java实现，无Kotlin依赖

### 主要依赖库
- **exp4j**：数学表达式计算引擎
- **Android Support Library**：UI组件支持
- **SQLite**：本地数据库存储

### 项目结构
```
com.scientificcalculator.android/
├── MainActivity.java              # 主界面活动
├── HistoryActivity.java          # 历史记录界面
├── adapter/
│   └── HistoryAdapter.java       # 历史记录列表适配器
├── calculator/
│   └── CalculatorEngine.java     # 计算引擎核心
└── data/
    ├── CalculationHistory.java   # 历史记录数据模型
    └── DatabaseHelper.java       # 数据库操作助手
```

## 核心功能模块

### 1. 计算引擎 (CalculatorEngine)
负责数学表达式的解析和计算，支持：
- 基础四则运算
- 科学函数计算
- 错误处理和结果格式化
- 符号转换（×→*、÷→/等）

### 2. 数据存储 (DatabaseHelper)
管理计算历史记录的SQLite数据库操作：
- 创建和维护历史记录表
- 插入新的计算记录
- 查询历史记录列表
- 删除和清空操作

### 3. 用户界面
- **主界面**：计算器键盘和显示屏
- **历史界面**：显示过往计算记录
- **响应式布局**：适配不同屏幕尺寸

### 4. 数据模型 (CalculationHistory)
计算历史记录的数据结构：
- 表达式字符串
- 计算结果
- 时间戳记录

## 使用说明

### 基础操作
1. **数字输入**：点击数字按钮输入数值
2. **运算符**：点击+、-、×、÷进行基础运算
3. **等号计算**：点击=号获得最终结果
4. **清除操作**：C键清除当前输入，AC键全部清除

### 科学函数
1. **三角函数**：sin、cos、tan（输入角度值）
2. **对数函数**：ln（自然对数）、log（常用对数）
3. **其他函数**：√（平方根）、^（幂运算）、!（阶乘）
4. **常量**：π（圆周率）、e（自然常数）

### 历史记录
1. **自动保存**：每次计算结果自动保存
2. **查看历史**：点击菜单查看历史记录
3. **重用表达式**：点击历史记录可重新使用
4. **清空历史**：菜单中可清除所有历史

### 便民功能
1. **结果复制**：长按结果可复制到剪贴板
2. **实时预览**：输入时实时显示计算结果
3. **删除字符**：退格键删除最后输入的字符

## 开发说明

### 编译环境
- **Android Studio**：推荐最新版本
- **JDK**：Java 8及以上
- **Android SDK**：API Level 24及以上
- **Gradle**：8.0及以上版本

### 构建命令
```bash
# 清理项目
./gradlew clean

# 构建调试版本
./gradlew assembleDebug

# 运行单元测试
./gradlew test

# 构建发布版本
./gradlew assembleRelease
```

### 测试覆盖
项目包含完整的单元测试：
- 基础运算测试
- 科学函数测试
- 复合表达式测试
- 错误处理测试
- 阶乘和百分比测试

## 版本信息
- **当前版本**：1.0
- **最低支持**：Android 7.0 (API Level 24)
- **目标版本**：Android 14 (API Level 34)

## 许可协议
本项目采用开源协议，详见LICENSE文件。

## 更新日志

### v1.0 (2025-11-21)
- ✅ 完成Kotlin到Java的完整重构
- ✅ 实现所有基础和科学计算功能
- ✅ 添加历史记录功能
- ✅ 完善用户界面和交互体验
- ✅ 完成单元测试覆盖
- ✅ 完整中文化注释和文档
